{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/brayhanjaramillo/DocumentosBrayhan/React Native/repositorio/petGeo5/app/components/account/ChangeDisplayNameForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Input, Button, Card } from \"react-native-elements\";\nimport { isEmpty } from \"lodash\";\nimport * as firebase from \"firebase\";\nimport { styles } from \"../../src/css/ModalProfile\";\n\nfunction defaultFormValue(displayName) {\n  return {\n    names: \"\",\n    lastnames: \"\",\n    displayName: displayName\n  };\n}\n\nfunction ChangeDisplayNameForm(props) {\n  console.log(\"cambiando nombre\");\n  var displayName = props.displayName,\n      setShowModal = props.setShowModal,\n      setReloadUserInfo = props.setReloadUserInfo;\n\n  var _useState = useState(defaultFormValue(displayName)),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setformData = _useState2[1];\n\n  var names = formData.names,\n      lastnames = formData.lastnames;\n  var newDisplayName = names + \" \" + lastnames;\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorNames = _useState4[0],\n      setErrorNames = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errorLastNames = _useState6[0],\n      setErrorLastNames = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      error = _useState8[0],\n      setError = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isLoading = _useState10[0],\n      setIsLoading = _useState10[1];\n\n  var _onChange = function onChange(even, type) {\n    var _objectSpread2;\n\n    setformData(_objectSpread({}, formData, (_objectSpread2 = {}, _defineProperty(_objectSpread2, type, even.nativeEvent.text), _defineProperty(_objectSpread2, \"displayName\", formData.names + \" \" + formData.lastnames), _objectSpread2)));\n    console.log(formData);\n  };\n\n  var onSubmit = function onSubmit() {\n    setError(null);\n\n    if (isEmpty(names)) {\n      setErrorNames(\"El campo Nombres debe estar diligenciado.\");\n      setErrorLastNames(null);\n    } else if (isEmpty(lastnames)) {\n      setErrorNames(null);\n      setErrorLastNames(\"El campo Apellidos debe estar diligenciado.\");\n    } else if (displayName === newDisplayName) {\n      setErrorNames(null);\n      setErrorLastNames(null);\n      setError(\"El nombre no puede ser igual al actual.\");\n    } else {\n      setErrorNames(null);\n      setErrorLastNames(null);\n      var update = {\n        displayName: newDisplayName\n      };\n      setIsLoading(true);\n      firebase.auth().currentUser.updateProfile(update).then(function () {\n        console.log(\"ok\");\n        setIsLoading(false);\n        setReloadUserInfo(true);\n        setShowModal(false);\n      }).catch(function () {\n        setError(\"Error al actualizar el nombre\");\n        setIsLoading(false);\n      });\n    }\n  };\n\n  return React.createElement(Card, {\n    title: \"Nombre Completo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.view,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, React.createElement(Input, {\n    placeholder: \"Nombres\",\n    containerStyle: styles.input,\n    rightIcon: {\n      type: \"material-community\",\n      color: \"#C2C2C2\"\n    },\n    onChange: function onChange(even) {\n      return _onChange(even, \"names\");\n    },\n    errorMessage: errorNames,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }), React.createElement(Input, {\n    placeholder: \"Apellidos\",\n    containerStyle: styles.input,\n    rightIcon: {\n      type: \"material-community\",\n      color: \"#C2C2C2\"\n    },\n    onChange: function onChange(even) {\n      return _onChange(even, \"lastnames\");\n    },\n    errorMessage: errorLastNames,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }), React.createElement(Input, {\n    placeholder: \"Nombres y Apellidos\",\n    containerStyle: styles.input,\n    rightIcon: {\n      type: \"material-community\",\n      name: \"account-circle-outline\",\n      color: \"#C2C2C2\"\n    },\n    defaultValue: formData.displayName,\n    disabled: true,\n    onChange: function onChange(even) {\n      return _onChange(even, \"displayName\");\n    },\n    errorMessage: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    title: \"Cambiar Nombre\",\n    containerStyle: styles.btnContainer,\n    buttonStyle: styles.btnUpdate,\n    onPress: onSubmit,\n    loading: isLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default ChangeDisplayNameForm;","map":{"version":3,"sources":["/Users/brayhanjaramillo/DocumentosBrayhan/React Native/repositorio/petGeo5/app/components/account/ChangeDisplayNameForm.js"],"names":["React","useState","Input","Button","Card","isEmpty","firebase","styles","defaultFormValue","displayName","names","lastnames","ChangeDisplayNameForm","props","console","log","setShowModal","setReloadUserInfo","formData","setformData","newDisplayName","errorNames","setErrorNames","errorLastNames","setErrorLastNames","error","setError","isLoading","setIsLoading","onChange","even","type","nativeEvent","text","onSubmit","update","auth","currentUser","updateProfile","then","catch","view","input","color","name","btnContainer","btnUpdate"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { StyleSheet, View, Text } from \"react-native\";\nimport { Input, Button, Card } from \"react-native-elements\";\nimport { isEmpty } from \"lodash\";\nimport * as firebase from \"firebase\";\nimport { styles } from \"../../src/css/ModalProfile\";\n//import {db} from '../../utils/FireBase'\n\nfunction defaultFormValue(displayName) {\n  return {\n    names: \"\",\n    lastnames: \"\",\n    displayName: displayName,\n  };\n}\n\nfunction ChangeDisplayNameForm(props) {\n  console.log(\"cambiando nombre\");\n\n  const { displayName, setShowModal, setReloadUserInfo } = props;\n\n  //variables donde se guardara lo que el usuario ingrese en los campos nombres y apellidos\n  const [formData, setformData] = useState(defaultFormValue(displayName));\n\n  //variables que poseen la info anteriormente ingresada por el usuario\n  var { names, lastnames } = formData;\n\n  var newDisplayName = `${names} ${lastnames}`;\n\n  // const [newDisplayName, setNewDisplayName] = useState(null)\n\n  //variable que se utiliza para mostrar el error en el campo nombres\n  const [errorNames, setErrorNames] = useState(null);\n\n  //variable que se utiliza para mostrar el error en el campo apellidos\n  const [errorLastNames, setErrorLastNames] = useState(null);\n\n  //variable que se utiliza para mostrar el error en el campo displayName\n  const [error, setError] = useState(null);\n\n  //variable que se utiliza para actualizar automaticamente despues de que se guarde el nuevo nombre\n  const [isLoading, setIsLoading] = useState(false);\n\n  //funcion que nos permite capturar lo que escribieron en los campos nombres y apellidos\n  const onChange = (even, type) => {\n    setformData({\n      ...formData,\n      [type]: even.nativeEvent.text,\n      displayName: `${formData.names} ${formData.lastnames}`,\n    });\n\n    console.log(formData);\n  };\n\n  //funcion que nos permite actualizar el displayName del usuario\n  const onSubmit = () => {\n    setError(null);\n\n    if (isEmpty(names)) {\n      setErrorNames(\"El campo Nombres debe estar diligenciado.\");\n      setErrorLastNames(null);\n    } else if (isEmpty(lastnames)) {\n      setErrorNames(null);\n      setErrorLastNames(\"El campo Apellidos debe estar diligenciado.\");\n    } else if (displayName === newDisplayName) {\n      setErrorNames(null);\n      setErrorLastNames(null);\n      setError(\"El nombre no puede ser igual al actual.\");\n    } else {\n      setErrorNames(null);\n      setErrorLastNames(null);\n      const update = {\n        displayName: newDisplayName,\n      };\n      setIsLoading(true);\n\n      // Add a new document with a generated id.\n\n      // var newCityRef = db.collection('res_user').doc('doc_1');\n\n      // // later...\n      // newCityRef.set({\n      // \tsexo: 'M',\n      // \ttype_user: 'person_normal'\n\n      // });\n\n      firebase\n        .auth()\n        .currentUser.updateProfile(update)\n        .then(() => {\n          console.log(\"ok\");\n          setIsLoading(false);\n          setReloadUserInfo(true);\n          setShowModal(false);\n        })\n        .catch(() => {\n          setError(\"Error al actualizar el nombre\");\n          setIsLoading(false);\n        });\n    }\n  };\n\n  return (\n    <Card title=\"Nombre Completo\">\n      <View style={styles.view}>\n        <Input\n          placeholder=\"Nombres\"\n          containerStyle={styles.input}\n          rightIcon={{\n            type: \"material-community\",\n            color: \"#C2C2C2\",\n          }}\n          onChange={(even) => onChange(even, \"names\")}\n          errorMessage={errorNames}\n        />\n        <Input\n          placeholder=\"Apellidos\"\n          containerStyle={styles.input}\n          rightIcon={{\n            type: \"material-community\",\n            color: \"#C2C2C2\",\n          }}\n          onChange={(even) => onChange(even, \"lastnames\")}\n          errorMessage={errorLastNames}\n        />\n        <Input\n          placeholder=\"Nombres y Apellidos\"\n          containerStyle={styles.input}\n          rightIcon={{\n            type: \"material-community\",\n            name: \"account-circle-outline\",\n            color: \"#C2C2C2\",\n          }}\n          defaultValue={formData.displayName}\n          disabled={true}\n          onChange={(even) => onChange(even, \"displayName\")}\n          errorMessage={error}\n        />\n        <Button\n          title=\"Cambiar Nombre\"\n          containerStyle={styles.btnContainer}\n          buttonStyle={styles.btnUpdate}\n          onPress={onSubmit}\n          loading={isLoading}\n        />\n      </View>\n    </Card>\n  );\n}\n\nexport default ChangeDisplayNameForm;\n"]},"metadata":{},"sourceType":"module"}